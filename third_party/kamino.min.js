/*! Kamino v0.0.1 | http://github.com/Cyril-sf/kamino.js | Copyright 2012, Kit Cambridge | http://kit.mit-license.org */
;(function(){var n=!0,r=null;
(function(D){function A(b,a,c){var d=b[a],e;if("object"==typeof d&&d)if("[object Array]"==l.call(d))for(e=d.length;e--;)B(d,e,c);else x(d,function(b){B(d,b,c)});return c.call(b,a,d)}function B(b,a,c){c=A(b,a,c);void 0===c?delete b[a]:b[a]=c}function y(b){var a,c;"$"==b&&g();if("string"==typeof b){if("@"==b[0])return b.slice(1);if("["==b){a=[];for(s[s.length]=a;;c||(c=n)){b=o();if("]"==b)break;c&&(","==b?(b=o(),"]"==b&&g()):g());","==b&&g();a.push(y("string"==typeof b&&p?b.split(""):b))}return a}if("{"==
b){a={};for(s[s.length]=a;;c||(c=n)){b=o();if("}"==b)break;c&&(","==b?(b=o(),"}"==b&&g()):g());(","==b||"string"!=typeof b||"@"!=b[0]||":"!=o())&&g();var d=o();a[b.slice(1)]=y("string"==typeof d&&p?d.split(""):d)}return a}g()}return b}function o(){for(var b=t,h=b.length,c,d,e;a<h;)if(c=b[a],-1<"\t\r\n ".indexOf(c))a++;else{if(-1<"{}[]:,".indexOf(c))return a++,c;if('"'==c)return v("@");if("%"==c){if(a++,c=b[a],'"'==c)return b=v(),new Date(b)}else if("^"==c){if(a++,c=b[a],'"'==c&&(d=v(),c=b[a],'"'==
c))return b=v(),RegExp(d,b)}else if("&"==c){if(a++,c=b[a],"0"<=c&&"9">=c)return a++,s[c]}else{d=a;"-"==c&&(e=n,c=b[++a]);if("0"<=c&&"9">=c){for("0"==c&&(c=b[a+1],"0"<=c&&"9">=c)&&g();a<h&&(c=b[a],"0"<=c&&"9">=c);a++);if("."==b[a]){for(e=++a;e<h&&(c=b[e],"0"<=c&&"9">=c);e++);e==a&&g();a=e}c=b[a];if("e"==c||"E"==c){c=b[++a];("+"==c||"-"==c)&&a++;for(e=a;e<h&&(c=b[e],"0"<=c&&"9">=c);e++);e==a&&g();a=e}return+b.slice(d,a)}e&&g();if("true"==b.slice(a,a+4))return a+=4,n;if("false"==b.slice(a,a+5))return a+=
5,!1;if("Infinity"==b.slice(a,a+8))return a+=8,Infinity;if("NInfinity"==b.slice(a,a+9))return a+=9,-Infinity;if("NaN"==b.slice(a,a+3))return a+=3,NaN;if("null"==b.slice(a,a+4))return a+=4,r}g()}return"$"}function v(b){var h=t,c=h.length,d,e,m,b=b||"";for(a++;a<c;)if(d=h[a]," ">d)g();else if("\\"==d)if(d=h[++a],-1<'\\"/btnfr'.indexOf(d))b+=E[d],a++;else if("u"==d){e=++a;for(m=a+4;a<m;a++)d=h[a],"0"<=d&&"9">=d||"a"<=d&&"f">=d||"A"<=d&&"F">=d||g();b+=F("0x"+h.slice(e,a))}else g();else{if('"'==d)break;
b+=d;a++}if('"'==h[a])return a++,b;g()}function g(){a=t=r;throw SyntaxError();}function z(b,a,c,d,e,m,u){var f=a[b],i,q,j,g;j="";if(f instanceof Error||f instanceof Function)throw new KaminoException;if("object"===typeof HTMLElement?f instanceof HTMLElement:f&&"object"===typeof f&&1===f.nodeType&&"string"===typeof f.nodeName)throw new KaminoException;if("object"==typeof f&&f)if(i=l.call(f),"[object Date]"==i&&!k.call(f,"toJSON"))f=f>-1/0&&f<1/0?f.toUTCString().replace("GMT","UTC"):r;else if("function"==
typeof f.toJSON&&("[object Number]"!=i&&"[object String]"!=i&&"[object Array]"!=i||k.call(f,"toJSON")))f=f.toJSON(b);c&&(f=c.call(a,b,f));if(f===r)return"null";if(void 0!==f){b=l.call(f);if("[object Boolean]"==b)return""+f;if("[object Number]"==b)return f===Number.POSITIVE_INFINITY?"Infinity":f===Number.NEGATIVE_INFINITY?"NInfinity":isNaN(f)?"NaN":""+f;if("[object RegExp]"==b)return i=f.source,j+=f.ignoreCase?"i":"",j+=f.global?"g":"",j+=f.multiline?"m":"",i=w(p?i.split(""):i),j=w(p?j.split(""):j),
f="^"+i+j;if("[object String]"==b)return f=w(p?f.split(""):f),"[object Date]"==i&&(f="%"+f),f;if("object"==typeof f){for(j=u.length;j--;)if(u[j]===f)return"&"+j;u.push(f);q=[];i=m;m+=e;if("[object Array]"==b){a=0;for(j=f.length;a<j;g||(g=n),a++)b=z(a,f,c,d,e,m,u),q.push(void 0===b?"null":b);j=g?e?"[\n"+m+q.join(",\n"+m)+"\n"+i+"]":"["+q.join(",")+"]":"[]"}else x(d||f,function(b){var a=z(b,f,c,d,e,m,u);void 0!==a&&q.push(w(p?b.split(""):b)+":"+(e?" ":"")+a);g||(g=n)}),j=g?e?"{\n"+m+q.join(",\n"+m)+
"\n"+i+"}":"{"+q.join(",")+"}":"{}";return j}}}function w(b){for(var a='"',c=0,d;d=b.charAt(c);c++){if(-1<'\\"\u0008\u000c\n\r\t'.indexOf(d))d=C[d];else{var e=C,g=d;d=" ">d?"\\u00"+("000000"+(d.charCodeAt(0).toString(16)||0)).slice(-2):d;d=e[g]=d}a+=d}return a+'"'}var l={}.toString,k,x;Kamino={};"undefined"!==typeof exports?("undefined"!==typeof module&&module.a&&(exports=module.a=Kamino),exports.c=Kamino):D.Kamino=Kamino;Kamino.VERSION="0.1.0";KaminoException=function(){this.name="KaminoException";
this.message="Uncaught Error: DATA_CLONE_ERR: Kamino Exception 25"};var p="A"!="A"[0];if(!(k={}.hasOwnProperty))k=function(a){var h={},c;if((h.__proto__=r,h.__proto__={toString:1},h).toString!=l)k=function(a){var b=this.__proto__,a=a in(this.__proto__=r,this);this.__proto__=b;return a};else{c=h.constructor;k=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in b&&this[a]===b[a])}}h=r;return k.call(this,a)};x=function(a,h){var c=0,d,e,g;(d=function(){this.valueOf=0}).prototype.valueOf=
0;e=new d;for(g in e)k.call(e,g)&&c++;d=e=r;if(c)c=c==2?function(a,b){var c={},d=l.call(a)=="[object Function]",e;for(e in a)!(d&&e=="prototype")&&!k.call(c,e)&&(c[e]=1)&&k.call(a,e)&&b(e)}:function(a,b){var c=l.call(a)=="[object Function]",d,e;for(d in a)!(c&&d=="prototype")&&k.call(a,d)&&!(e=d==="constructor")&&b(d);(e||k.call(a,d="constructor"))&&b(d)};else{e=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];c=function(a,b){var c=l.call(a)==
"[object Function]",d;for(d in a)!(c&&d=="prototype")&&k.call(a,d)&&b(d);for(c=e.length;d=e[--c];k.call(a,d)&&b(d));}}c(a,h)};var C={"\\":"\\\\",'"':'\\"',"\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};Kamino.stringify=function(a,h,c){var d,e,g;if(typeof h=="function"||typeof h=="object"&&h)if(l.call(h)=="[object Function]")e=h;else if(l.call(h)=="[object Array]"){g={};for(var k=0,f=h.length,i;k<f;i=h[k++],(l.call(i)=="[object String]"||l.call(i)=="[object Number]")&&(g[i]=1));}if(c)if(l.call(c)==
"[object Number]"){if((c=c-c%1)>0){d="";for(c>10&&(c=10);d.length<c;d=d+" ");}}else l.call(c)=="[object String]"&&(d=c.length<=10?c:c.slice(0,10));return z("",(i={},i[""]=a,i),e,g,d,"",[])};var F=String.fromCharCode,E={"\\":"\\",'"':'"',"/":"/",b:"\u0008",t:"\t",n:"\n",f:"\u000c",r:"\r"},a,t,s;Kamino.parse=function(b,h){var c,d;a=0;t=""+b;s=[];p&&(t=b.split(""));c=y(o());o()!="$"&&g();a=t=r;return h&&l.call(h)=="[object Function]"?A((d={},d[""]=c,d),"",h):c};Kamino.d=function(a){return Kamino.parse(Kamino.stringify(a))}})(this);
}());